
# Введение в архитектуру ЭВМ. Элементы операционных систем.

## 1. Введение принципы построения ЭВМ.

### Бинарные числа и логические операции

...

### Простейшие электронные компоненты

...

### Архитектура вычислительной системы

Современные вычислетельные системы построенны по принципам Фон-Неймана:

- **Адресность**. Все данные хранятся в ячейках памяти. Каждая ячейка имеет номер (или адрес). Процессор может прочитать или записать значение в ячейку используя её адрес.
- **Однородность памяти**. Память для команд и данных общая. То есть в любую ячейку можно записать как машинную инструкцию, так и какие-то данные. (В гарвардской арихитектуре память и данные хранятся отдельно).
- **Программное управление**. Управление вычислительным процессом осуществляется с помощью загруженной в память программы. Программа представляет из себя набор инструкций и данных, с которыми она работает. Для последовательного исполнения инструкций в системе существует специальная область памяти, которая содержит счетчик команд (IP, Instruction Pointer), который указывает на адрес текущей исполняемой инстукции.

Компоненты вычислительной системы:

- Арифметико-логическое устройство (ALU). Осуществляет арифметические и логические операции.
- Запоминающее устройство (память). Хранит данные и инстукции.
- Устройство ввода-вывода.
- Устройство управления.

Все устройства соединены между собой шинами (bus).

Все компоненты вычислительной системы обычно взаимодействуют друг с другом, а значит они должны быть синхронизированы. Для синхронизации используется тактовый генератор, который задает общее время в системе. Он генерирует импульсы, доступные всем элементам системы. В моменты импульсов какие-то элементы выполняют свои функции, какие-то просто меняют свое состояние.

Все операции по передаче или получению данных из внешних устройств называются операциями ввода-вывода. Существуют два варианта организации ввода-вывода:

- Через порты. Резервируется специальный диапазон адресов, которые называются портами. Можно считать, что номер порта - это логический номер устройства, через который процессор может общаться с этим устройством через шину памяти.
- Через память. Используется в случае, когда нет возможности использовать первый способ, то есть зарезервировать диапазон адресов под порты. В таком случае используется механизм, которые позволяет отобразить диапазон адресов памяти внешнего устройства на диапазон адресов памяти вычислительной системы.

Важным механизмом при организации вычислений являются прерывания. Прерывание - это специальный сигнал процессору, который оповещает его о каком-то внешнем событии.

Когда происходит прерывание, процессор прекращает свою работу и обрабатывает прерывание. Происходит это так:
- на специальный контакт процессора подается сигнал, который сообщает о прерывании.
- процессор заканчивает исполнение текущей инструкции и переходит к обработчику прерывания - специальной программе, которая находится в памяти.
- после того, как обработка прерывания завершилась, процессор возвращется к выполнению прерванной программы.

Прерывания могут быть синхронными и асинхронными.
- Синхронные как правило происходят внутри самого процессора. Это могут быть исключительные ситуации (обращение к несуществующей ячейке памяти) или программные прерывания (например при выводе информации на экран).
- Асинхронные - те, которые приходят с внешних устройств. Например, сетевая плата может сгенерировать прерывание при необходимости записать данные из внутренней памяти в память вычислительного устройства.

Для того, чтобы упорядочить возникающие в системы асинхронные прерывания, используется специальное устройство, которое называется контроллером прерываний.

## 2. Введение в язык ассемблера

- Архитектура - набор регистров в команд.
- Команды могут быть 3х типов.
    - вычислительные (арифметические, логические)
    - работа с памятью (запись из памяти в регистр, запись из регистра в регистр)
    - команды управления (условные и безусловные переходы)

Пример программы на ассемблере (возведение числа в степень):

```
power:
    push %ebx

    mov $1, %ebx
    test %edx, %edx
    jz end

    mov $0, %ebx
    test %eax, %eax
    jz end
    
    mov $1, %ebx
loop:
    imul %eax, %ebx
    dec %edx
    test %edx, %edx
    jz end
    jmp loop
end:
    mov %ebx, %eax
    pop %ebx
    ret
```

## 3. Базовые элементы операционной системы

### Задачи операционной системы

Назначение ОС:
- управление аппаратными ресурсами (процессор, память, устройства ввода-вывода).
- абстракция оборудования и унификация доступа
- предоставление расширенных возможностей по управлению процессором и периферией
- защита, разделение доступа

Базовые компоненты ОС:
- планировщик
- менеджер памяти
- механизмы межпроцессного взаимодействия

Адресное пространство - диапазон адресов (имен), которые могут быть использованы для адресации данных.

Процесс - это программа, исполняемая процессором и связанные с данной программой ресурсы (адресное пространство, файлы, регистры).

Файл - это именованая последовательность данных на каком-либо носителе. Можно также определить файл как универсальный интерфейс доступа к данным и к устройствам. В файл можно писать данные, также можно читать данные из файла. Файл имеет следующие атрибуты:
- Имя
- Флаги доступа
- Тип
- Указатель на текущий символ
- ...
